<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <title>Shiftsmart Check-In</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
      /* --- Fonts and Global Styles --- */
      body {
        /* Use Josefin Sans as the primary font */
        font-family: 'Josefin Sans', sans-serif; 
        /* Dark Gradient Background */
        background: linear-gradient(135deg, #1f2023 0%, #0d0e10 100%); 
        padding: 20px;
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
      }
      .container {
        width: 100%;
        max-width: 460px; /* Slightly wider container for 2-column radios */
        background-color: #2c2f33; /* Dark card background */
        border-radius: 16px; 
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
        padding: 30px;
        border: 1px solid #3d4044;
      }

      /* --- Text Gradient Mixin --- */
      .orange-gradient-text {
        background: -webkit-linear-gradient(0deg, #ff8c00, #ff4500);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      /* --- Header and Text (Orange Gradient for H1) --- */
      h1 {
        font-size: 28px;
        margin-bottom: 5px;
        padding-bottom: 15px;
        font-weight: 700;
        border-bottom: 2px solid #ff6600; 
        /* Apply gradient */
        background: -webkit-linear-gradient(0deg, #ff8c00, #ff4500); /* Ensure for older browsers */
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      p.subheader {
        color: #c0c4c8; /* Light gray text - kept as is for contrast */
        margin-bottom: 20px;
        font-size: 14px;
      }

      /* --- Location Status Display --- */
      #locationStatus {
        margin: 20px 0;
        padding: 16px;
        text-align: center;
        border-radius: 8px;
        font-weight: 600;
        min-height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #3d4044; 
        border: 1px solid #ff9900; 
      }
      /* Generic Status (Loading/Error) - Uses Orange Gradient text color */
      .status-loading span, .status-error span {
          /* Applying Orange Gradient to the status text */
          background: -webkit-linear-gradient(0deg, #ff8c00, #ff4500);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          font-weight: 700;
      }

      /* Success Status - Uses Solid Green text color */
      .status-success {
          background-color: #1a4a35; 
          border: 1px solid #4ade80;
      }
      .status-success span {
          color: #4ade80; /* Solid Green for success text */
          -webkit-text-fill-color: #4ade80; /* Override transparent fill */
      }
      .status-error {
          background-color: #5c1818; 
          border: 1px solid #ff6b6b;
      }

      /* --- Form Styling --- */
      .form-group {
        margin-bottom: 20px;
      }
      label {
        display: block;
        margin-bottom: 6px;
        font-weight: 600; 
        font-size: 14px;
        /* Apply gradient to labels */
        background: -webkit-linear-gradient(0deg, #ff8000, #ff4500);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      
      /* Target all text inputs and selects */
      input[type="text"],
      input[type="number"],
      select {
        width: 100%;
        padding: 16px 18px; /* Increased Padding */
        border: 1px solid #5a5f66; 
        border-radius: 12px; /* Slightly more rounded corners */
        box-sizing: border-box;
        font-size: 17px; 
        font-family: 'Josefin Sans', sans-serif;
        background-color: #3d4044; 
        color: #ffffff; /* Keep input text white for readability inside field */
      }
      
      input[readonly] {
        background-color: #4a4d52; 
        cursor: not-allowed;
      }

      /* --- Radio Button Styling (Two Columns) --- */
      .radio-group {
        border: 1px solid #5a5f66;
        border-radius: 12px; 
        padding: 10px;
        background-color: #3d4044;
        
        /* FLEXBOX FOR TWO COLUMNS */
        display: flex;
        flex-wrap: wrap; /* Allows options to wrap into a new column */
      }
      .radio-option {
        /* Each option takes up half the width */
        width: 50%; 
        padding: 8px 0;
        cursor: pointer;
        font-size: 15px;
        transition: background-color 0.2s;
      }
      .radio-option:hover {
          background-color: #33363b;
      }
      /* Custom radio circle styling */
      .radio-option input[type="radio"] {
        appearance: none;
        -webkit-appearance: none;
        width: 16px;
        height: 16px;
        border: 2px solid #c0c4c8;
        border-radius: 50%;
        margin-right: 8px;
        position: relative;
        top: 2px;
        vertical-align: top;
        cursor: pointer;
        background-color: transparent;
      }
      .radio-option input[type="radio"]:checked {
        border-color: #ff9900; 
      }
      .radio-option input[type="radio"]:checked::after {
        content: '';
        display: block;
        width: 8px;
        height: 8px;
        background: #ff9900; 
        border-radius: 50%;
        position: absolute;
        top: 4px;
        left: 4px;
      }
      .radio-option label {
          display: inline;
          margin: 0;
          font-weight: 400;
          cursor: pointer;
          /* Apply gradient to radio option labels */
          background: -webkit-linear-gradient(0deg, #ff8c00, #ff4500);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
      }

      /* --- Button Styling --- */
      #submitBtn {
        background-color: #ff9900; 
        color: #1f2023; 
        padding: 16px 20px; 
        border: none;
        border-radius: 12px; 
        cursor: pointer;
        width: 100%;
        font-size: 18px; 
        font-weight: 700;
        transition: background-color 0.3s ease;
        margin-top: 10px;
        font-family: 'Josefin Sans', sans-serif;
      }
      #submitBtn:hover:not(:disabled) {
        background-color: #ff6600; 
      }
      #submitBtn:disabled {
        background-color: #5a5f66; 
        color: #c0c4c8;
        cursor: not-allowed;
      }

      /* --- Message Area --- */
      #message {
        margin-top: 15px;
        padding: 10px;
        text-align: center;
        font-weight: 600;
        font-size: 15px;
        color: #ffffff; /* Keep success/error messages clear */
      }
    </style>




<script type="module">
    import { db } from '../firebaseConfig.js';
    import { collection, getDocs } from 'firebase/firestore';

    async function fetchData() {
      try {
        const querySnapshot = await getDocs(collection(db, "ssmart12"));
        querySnapshot.forEach((doc) => {
          console.log(doc.id, "=>", doc.data());
        });
      } catch (error) {
        console.error("Error fetching data:", error);
      }
    }

    fetchData();
  </script>











  </head>
  <body>
    <div class="container">
      <h1>Shiftsmart Check-In</h1>
      <p class="subheader">Store Id Will be Auto-Detected.</p>

      <div id="locationStatus" class="status-loading">
        <span>Initializing...</span>
      </div>

      <form id="checkinForm" onsubmit="handleFormSubmit(this)">
        
        <div class="form-group">
          <label for="storeLocation">Store ID (Lookup)</label>
          <input type="text" id="storeLocation" name="storeLocation" readonly value="Searching...">
        </div>

        <hr style="border-top: 1px solid #4a4d52; margin: 20px 0;">

        <div class="form-group">
          <label for="name">Your Name</label>
          <input type="text" id="name" name="yourName" required>
        </div>

        <div class="form-group">
          <label for="contactNo">Contact Number</label>
          <input type="text" id="contactNo" name="contactNo" required> 
        </div>
        
        <div class="form-group">
          <label for="role">Purpose/Role</label>
          <div class="radio-group">
              <div class="radio-option">
                  <input type="radio" id="role1" name="role" value="Breakfast Prep" required>
                  <label for="role1">Breakfast Prep</label>
              </div>
              <div class="radio-option">
                  <input type="radio" id="role2" name="role" value="Lunch Prep">
                  <label for="role2">Lunch Prep</label>
              </div>
              <div class="radio-option">
                  <input type="radio" id="role3" name="role" value="Snack Prep">
                  <label for="role3">Snack Prep</label>
              </div>
              <div class="radio-option">
                  <input type="radio" id="role4" name="role" value="Bin Prep">
                  <label for="role4">Bin Prep</label>
              </div>
              <div class="radio-option">
                  <input type="radio" id="role5" name="role" value="Cooler Refresh">
                  <label for="role5">Cooler Refresh</label>
              </div>
              <div class="radio-option">
                  <input type="radio" id="role6" name="role" value="Cleaner">
                  <label for="role6">Cleaner</label>
              </div>
              <div class="radio-option">
                  <input type="radio" id="role7" name="role" value="Trainee">
                  <label for="role7">Trainee</label>
              </div>
              <div class="radio-option">
                  <input type="radio" id="role8" name="role" value="Sampler">
                  <label for="role8">Sampler</label>
              </div>
          </div>
        </div>
        
        <input type="hidden" id="latitude" name="latitude" value="0">
        <input type="hidden" id="longitude" name="longitude" value="0">
        <input type="hidden" id="readableAddress" name="readableAddress" value="N/A">
        
        
        <button type="submit" id="submitBtn" disabled>
          Submit Entry
        </button>
      </form>

      <div id="message"></div>

    </div>

    <script>
      // ============================================
      // STORE LOOKUP MAP (Data remains unchanged)
      // ============================================
      const STORE_LOOKUP_MAP = {
"20887 HIGHWAY 35": "Store 2741910",
  "5602 UTSA BLVD": "Store 2741054",
  "3890 N LOOP 1604 E": "Store 2741038",
  "11380 SHAENFIELD RD": "Store 2741070",
  "9401 UP RIVER RD": "Store 2741502",
  "2497 S LOOP 336 E": "Store 2741484",
  "3324 NASA PKWY 1": "Store 2742584",
  "250 N LOOP 1604 E": "Store 2741020",
  "2202 HOLLY RD": "Store 2741849",
  "9895 HIGHWAY 242": "Store 2741922",
  "101 NORTHSHORE BLVD": "Store 2706985",
  "25 CALVARY RD": "Store 2741471",
  "12350 HIGHWAY 6": "Store 2742614",
  "908 10TH ST": "Store 2741547",
  "5230 W LOOP 1604": "Store 2741089",
  "12270 W HWY 29": "Store 2741588",
  "7910 NW LOOP 1604": "Store 2741838",
  "31700 INTERSTATE 10 W": "Store 2741060",
  "25930 HWY 84": "Store 2741566",
  "2370 W OAKLAWN RD": "Store 2741077",
  "13710 HWY 190 W": "Store 2741439",
  "5202 IH 37": "Store 2741501",
  "14902 NORTHWEST BLVD": "Store 2740432",
  "9517 S PADRE ISLAND DR": "Store 2741848",
  "1598 US HIGHWAY 90 E": "Store 2741822",
  "12200 OLD 2243 W": "Store 2741587",
  "110 E LOOP 340": "Store 2741323",
  "1625 W LEAGUE CITY PKWY": "Store 2741914",
  "2998 N STATE HIGHWAY 46": "Store 2741094",
  "2410 WEST EXPY 83": "Store 2741852",
  "1075 HIGHWAY 72": "Store 2741544",
  "1693 RIVER RD": "Store 2741058",
  "23543 STATE HIGHWAY 242": "Store 2741905",
  "2700 S US HIGHWAY 77 BYP": "Store 2706984",
  "505 SIDNEY BAKER ST": "Store 2741073",
  "101 N WATER ST": "Store 2741559",
  "4343 FM 2920 RD": "Store 2703590",
  "9350 SE LOOP 410": "Store 2741067",
  "2545 SAM RAYBURN PKWY": "Store 2741599",
  "11311 HWY 281 S": "Store 2741827",
  "11880 CULEBRA RD": "Store 2741056",
  "841 E BITTERS RD": "Store 2742165",
  "15239 STATE HIGHWAY 16 S": "Store 2741847",
  "1171 AT AND T CENTER PKWY": "Store 2741030",
  "2160 ROCK PRAIRIE RD": "Store 2741906",
  "11611 STATE HIGHWAY 151": "Store 2741063",
  "1625 RESEARCH FOREST DR": "Store 2741462",
  "1003 STATE HIGHWAY 123 N": "Store 2741078",
  "21997 FM 1314 RD": "Store 2741913",
  "1824 LAKE SHORE DR": "Store 2741549",
  "1408 S KEY AVE": "Store 2741553",
  "720 E SPRING VALLEY RD": "Store 2741328",
  "619 CROSSROADS AVE": "Store 2741831",
  "541 HWY 46": "Store 2704090",
  "6400 WACO DR": "Store 2741377",
  "9310 W 1604TH N": "Store 2741858",
  "HWY 321 & FM 1960": "Store 2740063",
  "9157 FM 471 N": "Store 2741821",
  "1414 NW LOOP 1604": "Store 2741843",
  "301 HARBORTH AVE": "Store 2740425",
  "19506 NORTHPARK DR": "Store 2741495",
  "400 CHRIS KELLEY BLVD": "Store 2741874",
  "11003 CULEBRA RD": "Store 2741062",
  "7530 NW LOOP 410": "Store 2741072",
  "1009 S LOOP 121": "Store 2741325",
  "9838 STATE HIGHWAY 151": "Store 2741051",
  "1802 W MARKET ST": "Store 2741499",
  "19417 BABCOCK RD": "Store 2741088",
  "620 FM 3083 RD": "Store 2741485",
  "13794 POTRANCO RD": "Store 2741842",
  "11206 INTERSTATE 35 FM 1626": "Store 2741570",
  "12111 OCONNOR RD": "Store 2741835",
  "5911 GIBBS SPRAWL RD": "Store 2704076",
  "12511 SW LOOP 410": "Store 2741053",
  "1724 N SARAH DEWITT DR": "Store 2741546",
  "1505 N LOOP 336": "Store 2741494",
  "2000 NASA RD 1 UPPER BAY": "Store 2741900",
  "2400 THOUSAND OAKS DR": "Store 2742119",
  "10010 FM 1604": "Store 2741045",
  "1500 E FERGUSON AVE": "Store 2704581",
  "5310 THOUSAND OAKS": "Store 2741839",
  "11510 BOUDREAUX RD": "Store 2741437",
  "6402 DE ZAVALA RD": "Store 2741846",
  "14807 OCONNOR RD": "Store 2741087",
  "4801 WALZEM RD": "Store 2741055",
  "5510 S GENERAL BRUCE DR": "Store 2741338",
  "10770 SPRING CYPRESS RD": "Store 2741443",
  "2016 N FM 3083 W": "Store 2741918",
  "7040 W SPRING CREEK PKWY": "Store 2741565",
  "14004 TELGE RD": "Store 2741487",
  "3801 RODDFIELD RD": "Store 2741830",
  "13907 SW LOOP 410": "Store 2741069",
  "8002 FM 78": "Store 2704068",
  "719 E CALVERT AVE": "Store 2704058",
  "1335 E LEAGUE CITY PKWY": "Store 2741472",
  "5300 ALAMO PKWY": "Store 2741057",
  "1808 E INTE": "Store 2741853",
  "8916 HIGHWAY 6": "Store 2742101",
  "738 S ROBB ST": "Store 2741925",
  "100 FM 1015": "Store 2741536",
  "10537 N HIGHWAY 359": "Store 2706983",
  "700 E FRONT ST": "Store 2741867",
  "13810 SAWYER RANCH RD": "Store 2741318",
  "2502 W FM 93": "Store 2741578",
  "21101 EVA ST": "Store 2742316",
  "11801 FM 423": "Store 2741211",
  "5725 LOUETTA RD": "Store 2703353",
  "21901 IH 35": "Store 2741074",
  "11311 HUEBNER RD": "Store 2741061",
  "6035 EISENHAUER RD": "Store 2704583",
  "15010 JUDSON RD": "Store 2704089",
  "5345 ROOSEVELT AVE": "Store 2741059",
  "4525 NORTH WARE ROAD": "Store 2704586",
  "7500 S HIGHWAY 377": "Store 2741876",
  "13014 POND SPRINGS RD": "Store 2742110",
  "32502 FM 2978 RD": "Store 2741901",
  "913 STATE HIGHWAY 46 E": "Store 2741071",
  "25500 ALDINE WESTFIELD RD": "Store 2741405",
  "8101 WOODLANDS PKWY": "Store 2741433",
  "8703 STATE HIGHWAY 151": "Store 2741064",
  "1 I H 35 & SOLMS RD": "Store 2704041",
  "3804 N FOSTER RD": "Store 2704064",
  "14004 FM 529 RD": "Store 2740937",
  "3421 LOUETTA RD": "Store 2741479",
  "2308 EAST U S BUSINESS 83": "Store 2704484",
  "531 E MALLOY BRIDGE RD": "Store 2744529",
  "1950 KATY FORT BEND RD": "Store 2703317",
  "3063 FM 725": "Store 2742009",
  "18501 INTERSTATE 35 W": "Store 2741202",
  "1900 W 3 MILE RD": "Store 2704591",
  "2475 S INTERSTATE 35": "Store 2704080",
  "7415 GARTH RD": "Store 2703593",
  "13445 W AIRPORT BLVD": "Store 2741436",
  "9675 CULEBRA RD": "Store 2740991",
  "13821 SPRING CYPRESS RD": "Store 2741469",
  "3093 HWY 61": "Store 2741498",
  "127 HIGHWAY 332 E": "Store 2740720",
  "5130 N LOOP 1604 E": "Store 2741052",
  "1483 HWY 71 W": "Store 2741595",
  "6988 BANDERA RD": "Store 2740932",
  "27137 STATE HIGHWAY 249": "Store 2741486",
  "4515 HIGHWAY 146": "Store 2742362",
  "1820 SOUTH CAGE BLVD": "Store 2709204",
  "104 IH 35 S": "Store 2741095",
  "3603 SE MILITARY DR": "Store 2742293",
  "5621 S COLONY BLVD": "Store 2741577",
  "101 FM 247 & FM 980": "Store 2740599",
  "8191 BARKER CYPRESS RD": "Store 2741442",
  "805 FM 1960 RD": "Store 2741923",
  "901 VOSS AVE": "Store 2706976",
  "1000 W STAN SCHLUETER LOOP": "Store 2741557",
  "3959 FRY RD": "Store 2741426",
  "3900 TRIMMIER RD": "Store 2741569",
  "8000 SW LOOP 820": "Store 2706343",
  "27575 US HIGHWAY 380 E": "Store 2741194",
  "217 S ALAMO ST": "Store 2706979",
  "2854 E HWY 71": "Store 2704691",
  "1221 E NEW HOPE DR": "Store 2741550",
  "1802 S GENERAL MCMULLEN DR": "Store 2740989",
  "1902 BALDWIN BLVD": "Store 2706970",
  "2201 S WASHINGTON ST": "Store 2706341",
  "17500 TELGE RD": "Store 2741915",
  "12020 RANCH RD 620": "Store 2704107",
  "455 S SOUTHLINE ST": "Store 2742394",
  "21830 FM 2920 RD": "Store 2741916",
  "955 IH 2 W": "Store 2704111",
  "28727 I 45": "Store 2742317",
  "1000 E HARWOOD RD": "Store 2741880",
  "10741 E CRYSTAL FALLS PKWY": "Store 2741560",
  "1303 CALLAGHAN RD": "Store 2741097",
  "1855 US MILITARY HWY 281": "Store 2741543",
  "2256 N TRADE DAYS BLVD": "Store 2706340",
  "5010 ALMA RD": "Store 2741585",
  "12200 FM 969": "Store 2741552",
  "4104 HIGHWAY 71 E": "Store 2704031",
  "321 SIDNEY BAKER ST S": "Store 2740538",
  "1081 W I H 35 N": "Store 2704029",
  "2000 W 18TH ST": "Store 2742172",
  "12303 WETMORE RD": "Store 2742459",
  "4609 E 29TH ST": "Store 2740560",
  "3710 FM 1488 RD": "Store 2741461",
  "HWY 30": "Store 2740541",
  "14005 S PADRE ISLAND DR": "Store 2706982",
  "11752 POTRANCO RD": "Store 2741833",
  "1617 E MAIN ST": "Store 2706972",
  "2616 COUNTY ROAD 59": "Store 2703594",
  "901 BUNKER HILL RD": "Store 2740565",
  "7802 S PADRE ISLAND DR D": "Store 2741505",
  "4585 RUBEN TORRES SR BLVD": "Store 2741859",
  "3003 BARKER CYPRESS RD": "Store 2703595",
  "102 CIELITOLINDO": "Store 2741832",
  "204 N MAIN ST STE 2": "Store 2742585",
  "304 NUECES ST": "Store 2740418",
  "26595 E UNIVERSITY DR": "Store 2741572",
  "103 W 5TH ST": "Store 2704043",
  "1805 W INTERSTATE 10": "Store 2704028",
  "3727 THOUSAND OAKS DR": "Store 2743949",
  "1098 HI 10 E": "Store 2704039",
  "3202 HIGHWAY 146": "Store 2742143",
  "5204 S COLONY BLVD": "Store 2742187",
  "959 PINELOCH DR": "Store 2741419",
  "515 CENTER ST": "Store 2740277",
  "901 EAST HARRISON AVENUE": "Store 2704598",
  "700 W PARKWOOD AVE": "Store 2742322",
  "704 N ROBINSON DR": "Store 2741335",
  "1601 E SAINT ELMO RD": "Store 2704677",
  "2104 W TRENTON RD": "Store 2741542",
  "7505 SPRING CYPRESS RD": "Store 2741427",
  "3782 STATE HWY 19": "Store 2740595",
  "420 E PEARL ST": "Store 2704053",
  "8648 HUEBNER RD": "Store 2741861",
  "10347 NACOGDOCHES RD": "Store 2742010",
  "104 S MAGNOLIA AVE": "Store 2704034",
  "24834 GOSLING RD": "Store 2741907",
  "2939 S MAIN ST": "Store 2703356",
  "3503 WURZBACH RD": "Store 2742030",
  "12300 HARRIS BRANCH PKWY": "Store 2741551",
  "8402 FAIRBANKS N HOUSTON RD": "Store 2742731",
  "6529 DALLAS TOLLWAY": "Store 2741567",
  "1411 E UNIVERSITY DR": "Store 2741580",
  "1318 2ND ST": "Store 2742428",
  "8839 SW LOOP 410": "Store 2741825",
  "1708 HIGHWAY 105": "Store 2741400",
  "4150 BRYANT IRVIN RD": "Store 2742073",
  "4502 HWY 181": "Store 2740135",
  "1546 N WESTGREEN BLVD": "Store 2741432",
  "1701 W HENDERSON ST": "Store 2740732",
  "4646 RITTIMAN RD": "Store 2741047",
  "801 S WESTGATE WAY": "Store 2741770",
  "9514 FM 78": "Store 2704091",
  "18615 FM 2100 RD": "Store 2742320",
  "3331 S SAM HOUSTON PKWY E": "Store 2741912",
  "8985 WILL CLAYTON PKWY": "Store 2703308",
  "101 W CENTRAL AVE": "Store 2704057",
  "15580 HIGHWAY 105 W": "Store 2742195",
  "102 DEMYA DR": "Store 2740173",
  "6801 MAIN ST": "Store 2742375",
  "215 N JOHNSON ST STE 281": "Store 2706977",
  "5091 FM 2351 RD": "Store 2741409",
  "8001 W UNIVERSITY DR": "Store 2741879",
  "7201 S PADRE ISLAND DR": "Store 2741508",
  "2909 PAT BOOKER RD": "Store 2741049",
  "1801 ELDORADO PKWY": "Store 2741759",
  "1703 STATE HIGHWAY 34 S": "Store 2744532",
  "1301 S LOOP DR": "Store 2741564",
  "6902 SEAWALL BLVD": "Store 2742363",
  "4070 PERRIN CENTRAL BLVD": "Store 2742240",
  "5636 WEBER RD": "Store 2706971",
  "3272 PARKWOOD BLVD": "Store 2741568",
  "1331 E Beltway 8": "Store 2741413",
  "10219 HUEBNER RD": "Store 2741084",
  "9010 BARKER CYPRESS RD": "Store 2741425",
  "9676 WESTOVER HILLS BLVD": "Store 2741076",
  "900 LOUIS HENNA BLVD": "Store 2704077",
  "175 ROBINSON RD": "Store 2742244",
  "438 S WW WHITE RD": "Store 2741820",
  "8303 MCCULLOUGH AVE": "Store 2742256",
  "4698 SEGUIN RD": "Store 2742301",
  "172 FM 1488 RD": "Store 2740591",
  "13155 KATY FWY": "Store 2741416",
  "2609 PECAN ST W": "Store 2704103",
  "1002 CASTROVILLE RD": "Store 2741023",
  "1310 BRAZOSPORT BLVD N": "Store 2741415",
  "2001 BROADWAY ST": "Store 2742140",
  "16555 HUEBNER RD": "Store 2741039",
  "16222 WALLISVILLE RD": "Store 2741477",
  "9377 FM 1960 BYPASS RD W": "Store 2741488",
  "2390 W CAMP WISDOM RD": "Store 2741593",
  "2501 25TH AVE N": "Store 2742271",
  "2219 HIGHWAY 201": "Store 2742007",
  "17599 INTERSTATE 35 N": "Store 2742034",
  "5494 BABCOCK RD": "Store 2742245",
  "1203 AUSTIN HWY": "Store 2742327",
  "2151 SW 36TH ST": "Store 2741024",
  "3511 W DAVIS ST": "Store 2741192",
  "8108 FREDERICKSBURG RD": "Store 2742469",
  "12626 ELDORADO PKWY": "Store 2742802",
  "5100 CRESTWAY DR": "Store 2741041",
  "13176 INTERSTATE 10 E": "Store 2741096",
  "1402 WILDCAT DR": "Store 2740979",
  "13555 BABCOCK RD": "Store 2741035",
  "3035 PLANTATION DR": "Store 2742396",
  "5995 CALLAGHAN RD": "Store 2742035",
  "1810 N FOSTER RD": "Store 2741036",
  "8102 CALLAGHAN RD": "Store 2740532",
  "13750 CYPRESS NORTH HOUSTON R": "Store 2741411",
  "7715 S ZARZAMORA ST": "Store 2742426",
  "1102 S MASON RD": "Store 2742016",
  "9630 W BELLFORT ST": "Store 2703354",
  "2501 N SAINT MARYS ST": "Store 2740429",
  "1020 N LOOP 340": "Store 2741379",
  "104 E US 290": "Store 2704692",
  "313 S HOUSTON RD": "Store 2740589",
  "3033 GOLIAD RD": "Store 2742001",
  "15720 SAN PEDRO AVE": "Store 2741019",
  "2697 FM 1960 EAST": "Store 2703309",
  "1107 E SARAH DEWITT DR": "Store 2704037",
  "1703 N NEW BRAUNFELS AVE": "Store 2742464",
  "502 N ESPLANADE ST": "Store 2704045",
  "3000 W BAKER RD": "Store 2742201",
  "19219 FM 529 RD": "Store 2741490",
  "12945 E HWY 87": "Store 2704063",
  "11499 BEAMER RD": "Store 2742191",
  "13215 W LITTLE YORK RD": "Store 2742605",
  "826 LEGACY DR": "Store 2742372",
  "16710 TERMINI SAN LUIS PASS R": "Store 2742608",
  "2404 BAY AREA BLVD": "Store 2742385",
  "8501 BROADWAY ST": "Store 2743948",
  "11000 RANCH ROAD 2222": "Store 2704688",
  "5626 TREASCHWIG RD": "Store 2742652",
  "6003 DE ZAVALA RD": "Store 2740982",
  "2230 CYPRESS CREEK PKWY": "Store 2703300",
  "5802 MEMORIAL DR": "Store 2742347",
  "6401 SARATOGA BLVD": "Store 2740430",
  "900 S BELL BLVD": "Store 2704679",
  "4150 STATE HIGHWAY 72 W": "Store 2741545",
  "8901 HIGHWAY 290 E": "Store 2741496",
  "12325 FM 1097 RD W": "Store 2741478",
  "18680 HIGHWAY 105 W": "Store 2742384",
  "100 E SLAUGHTER LN": "Store 2704673",
  "6107 W PARMER LN": "Store 2704686",
  "1927 61ST ST": "Store 2742618",
  "1003 N GRAND AVE": "Store 2744503",
  "3912 N MCCOLL RD": "Store 2741519",
  "2453 HIGHWAY 71 E": "Store 2704675",
  "5838 WESTHEIMER RD": "Store 2742392",
  "17310 HIGHWAY 3": "Store 2742150",
  "3950 VALLEY VIEW LN": "Store 2742055",
  "7253 INTERSTATE 10 E": "Store 2740377",
  "12201 TOEPPERWEIN RD": "Store 2742453",
  "102 E ARAPAHO RD": "Store 2741199",
  "901 S 5TH ST": "Store 2741376",
  "6312 IH35 N": "Store 2741334",
  "2700 E ABRAM ST": "Store 2744487",
  "11102 IH 37 VIOLET RD": "Store 2706987",
  "926 WESTHEIMER RD": "Store 2742148",
  "1602 S PADRE ISLAND DR D": "Store 2740974",
  "2617 FM 1463 RD": "Store 2741481",
  "4025 BOSQUE BLVD": "Store 2741395",
  "9865 POTRANCO RD": "Store 2742377",
  "5346 ROOSEVELT AVE": "Store 2743957",
  "3151 S WW WHITE RD": "Store 2742292",
  "5600 W DAVIS ST": "Store 2740597",
  "1710 S INDEPENDENCE PKWY": "Store 2741583",
  "5050 FM 2920 RD": "Store 2741431",
  "3820 SAN PEDRO AVE": "Store 2741823",
  "1116 N HIGHWAY 377": "Store 2741764",
  "3701 W US HIGHWAY 83": "Store 2741541",
  "958 W UNIVERSITY AVE": "Store 2743959",
  "15900 N RANCH RD 620": "Store 2704674",
  "506 AUSTIN HWY": "Store 2742196",
  "7144 N 23RD ST": "Store 2741518",
  "2406 E EXPRESSWAY 83": "Store 2741523",
  "2025 W 34TH ST": "Store 2740079",
  "14587 FM 1485 RD": "Store 2740593",
  "1779 WELLS BRANCH PKWY": "Store 2742102",
  "1700 STATE HIGHWAY 34 S": "Store 2706342",
  "3210 S ZARZAMORA ST": "Store 2741018",
  "12464 FM 3083 RD": "Store 2740592",
  "4660 WESTERN CENTER BLVD": "Store 2742000",
  "7153 BANDERA RD": "Store 2741048",
  "1121 N INTERSTATE 35": "Store 2740535",
  "3770 S GESSNER RD": "Store 2742166",
  "5415 KIRBY DR": "Store 2742609",
  "6330 MCARDLE RD": "Store 2740130",
  "FM 1314 & SORTERS RD": "Store 2742310",
  "11911 US HWY 281": "Store 2743947",
  "5239 US HIGHWAY 87 E": "Store 2741027",
  "12602 JONES MALTSBERGER RD": "Store 2742466",
  "800 S SAM HOUSTON BLVD": "Store 2741528",
  "2430 MAIN ST": "Store 2742546",
  "628 BROADWAY ST": "Store 2742018",
  "5411 GRISSOM RD": "Store 2742468",
  "9685 MARBACH RD": "Store 2742113",
  "8111 W TIDWELL RD": "Store 2742345",
  "6333 SAN FELIPE ST": "Store 2742588",
  "13197 BELLAIRE BLVD": "Store 2703310",
  "3411 THOUSAND OAKS DR": "Store 2741007",
  "2950 SW MILITARY DR": "Store 2741014",
  "405 E BOLING HWY": "Store 2740719",
  "8214 CULEBRA RD": "Store 2742358",
  "700 N AUSTIN AVE": "Store 2741314",
  "5121 N SHEPHERD DR": "Store 2742386",
  "9317 STATE HIGHWAY 75 S": "Store 2742319",
  "605 I-45": "Store 2740348",
  "3944 FREDERICKSBURG RD": "Store 2740020",
  "4707 GULF FWY": "Store 2742314",
  "4439 BISSONNET ST": "Store 2742387",
  "3010 N WESTMORELAND RD": "Store 2741592",
  "103 BANDERA RD": "Store 2742092",
  "2730 AGNES ST": "Store 2706973",
  "5811 SAN PEDRO AVE": "Store 2742086",
  "5101 GULFTON ST": "Store 2742304",
  "608 US HWY 77A": "Store 2704035",
  "604 N OAK ST": "Store 2740996",
  "1480 SAWDUST RD": "Store 2742180",
  "10880 N BEACH ST": "Store 2741758",
  "3980 FM 1382": "Store 2744507",
  "402 S MASON RD": "Store 2741420",
  "2230 FRY RD": "Store 2742021",
  "101 S MAIN ST": "Store 2741333",
  "2901 HIGHWAY 35 N": "Store 2709048",
  "4102 GREENWOOD DR": "Store 2740971",
  "4991 W UNIVERSITY DR": "Store 2741198",
  "502 EL DORADO BLVD": "Store 2742089",
  "1200 W CORPUS CHRISTI ST": "Store 2706986",
  "8656 SPICEWOOD SPRINGS RD": "Store 2741308",
  "5502 BLANCO RD": "Store 2742447",
  "12300 VETERANS MEMORIAL DR": "Store 2703303",
  "8318 HIGHWAY 6": "Store 2741440",
  "5439 EVERS RD": "Store 2742289",
  "6735 MEDINA BASE RD": "Store 2742106",
  "3659 E COMMERCE ST": "Store 2740040",
  "6450 W 43RD ST": "Store 2742369",
  "320 W SINTON ST": "Store 2740424",
  "25525 KUYKENDAHL RD": "Store 2741424",
  "300 S SAINT MARYS ST": "Store 2741515",
  "201 E AVENUE A": "Store 2740145",
  "12712 BROADWAY ST": "Store 2741482",
  "1910 NASA PKWY 1": "Store 2741404",
  "14393 NW MILITARY HWY": "Store 2740994",
  "5530 W MILITARY DR": "Store 2742456",
  "16250 FM 529 RD": "Store 2742348",
  "9022 MARBACH RD": "Store 2742269",
  "1502 S CLARK RD": "Store 2742108",
  "4295 BRITTMOORE RD": "Store 2740934",
  "100 S ARROYO BLVD": "Store 2741517",
  "1401 N BELT LINE RD": "Store 2742413",
  "2502 AUSTIN HWY": "Store 2742015",
  "16403 NACOGDOCHES RD": "Store 2741034",
  "711 E GRAVIS ST": "Store 2741504",
  "1615 SW LOOP 410": "Store 2743940",
  "5980 OLD PEARSALL RD": "Store 2742208",
  "2146 N JOSEY LN": "Store 2741740",
  "4002 S GREAT SOUTHWEST PKWY": "Store 2742249",
  "570 S SEGUIN AVE": "Store 2740185",
  "3324 INTERNATIONAL BLVD": "Store 2741512",
  "4839 DACOMA ST": "Store 2740903",
  "115 N RICHMOND RD": "Store 2740939",
  "8205 BRODIE LN": "Store 2741302",
  "7660 HWY 78": "Store 2743953",
  "8355 ECKHERT RD": "Store 2741003",
  "91 FORT VELASCO DR": "Store 2742506",
  "7702 BELLAIRE BLVD": "Store 2742091",
  "3939 CALLAGHAN RD": "Store 2741000",
  "903 N DALLAS AVE": "Store 2740768",
  "3909 GUADALUPE ST": "Store 2740080",
  "4900 W SUBLETT RD": "Store 2741738",
  "2250 BANDERA RD": "Store 2741006",
  "101 S MACARTHUR BLVD": "Store 2740946",
  "10713 JOLLYVILLE RD": "Store 2741396",
  "819 E MULBERRY AVE": "Store 2740921",
  "11607 N INTERSTATE 35": "Store 2743950",
  "100 S BROADWAY ST": "Store 2741209",
  "1622 N STATE HIGHWAY 360": "Store 2742176",
  "8150 POTRANCO RD": "Store 2741002",
  "12307 DESSAU RD": "Store 2743958",
  "335 W STATE HIGHWAY 6": "Store 2741378",
  "4902 E HOUSTON ST": "Store 2741029",
  "1129 FRESNO": "Store 2740171",
  "3112 CESAR CHAVEZ DR": "Store 2741319",
  "1706 E WILLIAM CANNON DR": "Store 2742194",
  "1307 W WHEELER AVE": "Store 2740427",
  "5801 S STAPLES ST STE A": "Store 2706978",
  "6666 W SAM HOUSTON PKWY N": "Store 2741406",
  "8660 FM 1464 RD": "Store 2741464",
  "1813 E BUSINESS HIGHWAY 83": "Store 2741514",
  "7203 BLANCO RD": "Store 2742159",
  "2004 E GRIFFIN PKWY": "Store 2741522",
  "1402 COLLEGE AVE": "Store 2740075",
  "7887 MCCALLUM BLVD": "Store 2742417",
  "2203 GESSNER RD": "Store 2742039",
  "2975 TEXAS PKWY": "Store 2741414",
  "606 ENRIQUE M BARRERA PKWY": "Store 2742291",
  "1101 N LOOP 336 W": "Store 2740594",
  "4402 W JEFFERSON BLVD": "Store 2742406",
  "525 S 14TH ST": "Store 2740106",
  "1203 ROOSEVELT AVE": "Store 2743937",
  "6403 BABCOCK RD": "Store 2741044",
  "401 E FM 1382": "Store 2741742",
  "401 E CALTON RD": "Store 2741043",
  "7305 CULEBRA RD": "Store 2741050",
  "17500 INTERSTATE 35 N": "Store 2741017",
  "8303 WILCREST DR": "Store 2742302",
  "1202 N US HIGHWAY 83": "Store 2741540",
  "3419 W SLAUGHTER LN": "Store 2742095",
  "946 AUSTIN ST": "Store 2742590",
  "6009 E BEN WHITE BLVD": "Store 2740967",
  "5401 N MACARTHUR BLVD": "Store 2742419",
  "7802 WESTHEIMER RD": "Store 2742334",
  "912 WALNUT ST": "Store 2740514",
  "14360 MEMORIAL DR": "Store 2740527",
  "1419 CULEBRA RD": "Store 2740531",
  "6500 US HIGHWAY 183 S": "Store 2704682",
  "920 SIX FLAGS DR": "Store 2744486",
  "4450 DE ZAVALA RD": "Store 2740999",
  "3601 ROWLETT RD": "Store 2742248",
  "2808 S 23RD ST": "Store 2741520",
  "6506 LAKE JUNE RD": "Store 2740730",
  "802 NE LOOP 410": "Store 2740029",
  "14821 WOODFOREST BLVD": "Store 2742637",
  "1405 W WILLIAM CANNON DR": "Store 2742420",
  "606 W SLAUGHTER LN": "Store 2704687",
  "3100 N A W GRIMES BLVD": "Store 2741554",
  "1010 N MAIN ST": "Store 2740969",
  "900 W FERGUSON ST": "Store 2741526",
  "4507 RITTIMAN RD": "Store 2740103",
  "3817 WILLIAMS DR": "Store 2704676",
  "1119 VANCE JACKSON RD": "Store 2743946",
  "8947 FM 2244 RD": "Store 2704680",
  "5518 ALPHA RD": "Store 2742003",
  "HWY 96 & DANA DR": "Store 2740368",
  "8774 STATE HIGHWAY 151": "Store 2743941",
  "2475 W TARRANT RD": "Store 2742054",
  "6003 OLD PEARSALL RD": "Store 2741026",
  "2525 BROWN BLVD": "Store 2742002",
  "2903 E SOUTHCROSS BLVD": "Store 2742299",
  "1901 S NEW BRAUNFELS AVE": "Store 2740119",
  "9710 BEECHNUT ST": "Store 2742328",
  "4720 PECAN VALLEY DR": "Store 2741021",
  "9433 PARKFIELD DR": "Store 2742141",
  "14209 WALLISVILLE RD": "Store 2742237",
  "3340 W LITTLE YORK RD": "Store 2703352",
  "1328 HIGHWAY 35 S": "Store 2740431",
  "603 HARVEY RD": "Store 2740547",
  "6306 E RIVERSIDE DR": "Store 2741300",
  "322 NORTON AVE": "Store 2740414",
  "4722 WEST AVE": "Store 2740093",
  "13105 SEAGOVILLE RD": "Store 2744488",
  "1303 W MOUNT HOUSTON RD": "Store 2740196",
  "4338 W COMMERCE ST": "Store 2740536",
  "8722 PERRIN BEITEL RD": "Store 2740255",
  "5126 BLANCO RD": "Store 2740094",
  "9697 SAN PEDRO AVE": "Store 2740924",
  "3242 CULEBRA RD": "Store 2740032",
  "2501 SE GREEN OAKS BLVD": "Store 2742378",
  "1729 W POLO RD": "Store 2742206",
  "5105 MCCULLOUGH AVE": "Store 2740095",
  "1102 S COCKRELL HILL RD": "Store 2740796",
  "911 STUDEWOOD ST": "Store 2740713",
  "905 N MCCOY BLVD": "Store 2744522",
  "2601 NOGALITOS": "Store 2740025",
  "1816 SHEPHERD DR": "Store 2742318",
  "703 N ZARZAMORA ST": "Store 2740005",
  "1503 SW MILITARY DR": "Store 2742467",
  "2100 PECAN ST W": "Store 2740557",
  "9403 CYPRESS CREEK PKWY": "Store 2742587",
  "1231 PROBANDT": "Store 2740412",
  "2395 N COLLINS ST": "Store 2742093",
  "9209 S ZARZAMORA ST": "Store 2742026",
  "611 W SOUTHCROSS BLVD": "Store 2743938",
  "6903 W MILITARY DR": "Store 2740253",
  "8235 BROADWAY ST": "Store 2740003",
  "11730 WESTHEIMER RD": "Store 2742174",
  "14195 BISSONNET ST": "Store 2742636",
  "500 S SAGINAW BLVD": "Store 2744528",
  "933 E RUNDBERG LN": "Store 2742069",
  "3121 1ST ST": "Store 2741403",
  "1420 E ANDERSON LN": "Store 2704690",
  "207 E HIGHWAY 90A": "Store 2740038",
  "727 MCCULLOUGH AVE": "Store 2740259",
  "2222 E OLTORF ST": "Store 2740552",
  "4712 HAVERWOOD LN": "Store 2742418",
  "3322 PLEASANTON RD": "Store 2740992",
  "2881 CR 122": "Store 2704689",
  "2215 S ZAPATA HWY": "Store 2741015",
  "730 S WAYSIDE DR": "Store 2740902",
  "6413 W US 290": "Store 2704684",
  "911 HWY 35 N": "Store 2740416",
  "302 US HIGHWAY 181": "Store 2740036",
  "4602 E STASSNEY LN": "Store 2742169",
  "4600 W WILLIAM CANNON DR": "Store 2741307",
  "13437 INTERSTATE 35 S": "Store 2743939",
  "8628 MANCHACA RD": "Store 2741303",
  "11139 N INTERSTATE 35": "Store 2742103",
  "1091 FULLER WISER RD": "Store 2742042",
  "6022 US HIGHWAY 87 E": "Store 2741028",
  "823 EDGEBROOK DR": "Store 2740163",
  "4418 STATE HIGHWAY 359": "Store 2741507",
  "6910 S FLORES ST": "Store 2740177",
  "9920 HIGHWAY 290 W": "Store 2704683",
  "8040 SOUTH LOOP E": "Store 2742305",
  "1145 INTERSTATE 30": "Store 2744517",
  "7622 W HIGHWAY 71": "Store 2741311",
  "1515 ROUND ROCK AVE": "Store 2704685",
  "3225 COMMERCIAL AVE": "Store 2740406",
  "1601 CHIHUAHUA ST": "Store 2741009",
  "1544 N SHEPHERD DR": "Store 2742591",
  "726 E PIONEER PKWY": "Store 2706114",
  "6909 AIRLINE DR": "Store 2740086",
  "360 W GULF BANK RD": "Store 2740310",
  "1505 S BELT LINE RD": "Store 2740793",
  "9616 AUDELIA RD": "Store 2706136",
  "4101 BELLAIRE BLVD": "Store 2740526",
  "416 E WASHINGTON AVE": "Store 2740505",
  "7129 LAWNDALE ST": "Store 2740712",
  "3341 N TOWN EAST BLVD": "Store 2740759",
  "3905 OLD DENTON RD": "Store 2740787",
  "1603 GOLIAD RD": "Store 2740105",
  "3030 MILITARY PKWY": "Store 2740792",
  "4530 TWIN CITY HWY": "Store 2740367",
  "5805 HWY 105": "Store 2740374",
  "221 I 35 HWY NW": "Store 2740799",
  "1301 N HIGHWAY 77": "Store 2741206",
  "2039 FORT WORTH HWY": "Store 2741878",
  "29926 TOMBALL PKWY": "Store 2742233",
  "4801 MOULTON ST": "Store 2744508",
  "6321 S 23rd St": "Store 2709047",
  "298 CR 421": "Store 2709056",
  "2705 N Cage Blvd": "Store 2709212",
  "14100 CULEBRA RD": "Store 2709228",
  "12275 Hwy 188": "Store 2709235",
  "1240 Erby Campbell Blvd": "Store 2709948"
};

      // ============================================
      // MOCK BACKEND FOR TESTING (Code remains unchanged)
      // ============================================
      if (typeof google === 'undefined') {
        window.google = {
          script: {
            run: {
              withSuccessHandler: function(successFn) {
                this._successFn = successFn;
                return this;
              },
              withFailureHandler: function(failureFn) {
                this._failureFn = failureFn;
                return this;
              },
              reverseGeocodeLocation: function(lat, lon) {
                setTimeout(() => {
                  const keys = Object.keys(STORE_LOOKUP_MAP);
                  const randomAddress = keys[Math.floor(Math.random() * keys.length)];
                  if (this._successFn) {
                    this._successFn({ address: randomAddress }); 
                  }
                }, 1500);
              },
              processForm: function(formObject) {
                setTimeout(() => {
                  if (this._successFn) {
                    this._successFn("Success");
                  }
                }, 2000);
              }
            }
          }
        };
      }

      // ============================================
      // JAVASCRIPT LOGIC 
      // ============================================

      const submitBtn = document.getElementById("submitBtn");
      const statusDiv = document.getElementById('locationStatus');
      
      const latInput = document.getElementById('latitude');
      const lonInput = document.getElementById('longitude');
      const addressInput = document.getElementById('readableAddress');
      const storeLocationInput = document.getElementById('storeLocation'); 

      function updateLocationStatus(message, type, enableSubmit = false) {
          statusDiv.innerHTML = `<span>${message}</span>`;
          
          statusDiv.classList.remove('status-loading', 'status-success', 'status-error');

          if(type === 'loading') {
              statusDiv.classList.add('status-loading');
          } else if (type === 'success') {
              statusDiv.classList.add('status-success');
          } else if (type === 'error') {
              statusDiv.classList.add('status-error');
          }

          submitBtn.disabled = !enableSubmit;
      }

      function handleGeocodeSuccess(response) {
          const detectedAddress = response.address || 'N/A';
          addressInput.value = detectedAddress; 
          
          let storeNumber = "Unknown Store Location";
          
          const normalizedAddress = detectedAddress.toUpperCase().replace(/\./g, '').replace(/,/g, '').replace(/ /g, ''); 

          for (const addressKey in STORE_LOOKUP_MAP) {
              const normalizedKey = addressKey.toUpperCase().replace(/\./g, '').replace(/,/g, '').replace(/ /g, '');
              if (normalizedAddress.includes(normalizedKey) || normalizedKey.includes(normalizedAddress)) {
                  storeNumber = STORE_LOOKUP_MAP[addressKey];
                  break; 
              }
          }

          storeLocationInput.value = storeNumber;
          updateLocationStatus(`Location Captured: ${detectedAddress}`, 'success', true); 
      }

      function success(position) {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;
          
          latInput.value = lat; 
          lonInput.value = lon; 
          storeLocationInput.value = "Looking up store number...";
          
          updateLocationStatus('Coordinates found. Fetching address...', 'loading', false);
          
          google.script.run
              .withSuccessHandler(handleGeocodeSuccess)
              .withFailureHandler(function(error) {
                  latInput.value = 'Geocoding Error';
                  storeLocationInput.value = 'Lookup Failed';
                  updateLocationStatus(`Server Error. Submitting disabled.`, 'error', false);
              })
              .reverseGeocodeLocation(lat, lon); 
      }

      function error(err) {
          latInput.value = 'Permission Denied';
          lonInput.value = 'Permission Denied';
          addressInput.value = 'N/A';
          storeLocationInput.value = 'N/A';
          
          let errorMessage = "Location failed. Check browser permissions.";
          
          if (err.code === 1) {
              errorMessage = "Geolocation **Permission Denied**. Please allow location access in your browser settings and refresh the page.";
          } else if (err.code === 2) {
              errorMessage = "Location **Unavailable**. Your device could not determine your position.";
          } else if (err.code === 3) {
              errorMessage = "Location request **Timed Out**. Try again, ensuring a strong GPS signal.";
          }

          updateLocationStatus(`Error: ${errorMessage}`, 'error', false);
      }

      function getLocation() {
          if (!navigator.geolocation) {
              updateLocationStatus('Geolocation **Not Supported** by this browser/device.', 'error', false);
              return;
          }
          // Request high accuracy for better location data
          const options = { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 };
          
          updateLocationStatus('Detecting current location...', 'loading', false);
          storeLocationInput.value = "Searching for store number...";
          navigator.geolocation.getCurrentPosition(success, error, options);
      }

      window.onload = getLocation;

      function handleFormSubmit(formObject) {
        event.preventDefault();
        var msg = document.getElementById("message");
        
        if (!formObject.checkValidity()) {
            msg.textContent = "Please fill out all required fields.";
            msg.style.color = '#ff6b6b'; 
            return;
        }

        var originalText = submitBtn.textContent;
        submitBtn.textContent = "Submitting...";
        submitBtn.disabled = true;
        msg.textContent = "";

        google.script.run
          .withSuccessHandler(function(response) {
            formObject.reset(); 
            getLocation(); 
            submitBtn.textContent = originalText;
            
            msg.style.color = "#4ade80"; 
            msg.textContent = "âœ“ Entry successfully recorded!";
            setTimeout(function() { msg.textContent = ""; }, 5000);
          })
          .withFailureHandler(function(error) {
            submitBtn.textContent = originalText;
            submitBtn.disabled = false;
            msg.style.color = "#ff6b6b"; 
            msg.textContent = "Error: " + error.message;
          })
          .processForm(formObject);
      }
    </script>
  </body>
</html>